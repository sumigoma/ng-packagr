{"version":3,"file":"packagr.js","sourceRoot":"","sources":["../../../src/lib/ng-v5/packagr.ts"],"names":[],"mappings":";;AAAA,+CAA2F;AAC3F,gEAA2D;AAE3D;IAEE,YACU,SAAqB;QAArB,cAAS,GAAT,SAAS,CAAY;IAC5B,CAAC;IAEG,aAAa,CAAC,SAAqB;QACxC,IAAI,CAAC,SAAS,GAAG;YACf,GAAG,IAAI,CAAC,SAAS;YACjB,GAAG,SAAS;SACb,CAAC;QAEF,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,KAAK;QACV,MAAM,QAAQ,GAAG,iCAAkB,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACrE,MAAM,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,qBAAa,CAAC,CAAC;QAE5C,MAAM,CAAC,iCAAc,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;IACrC,CAAC;CAEF;AAtBD,8BAsBC;AAEY,QAAA,SAAS,GAAG,GAAc,EAAE,CAAC,IAAI,SAAS,CAAC,EAEvD,CAAC,CAAC;AAEU,QAAA,aAAa,GAAG,IAAI,6BAAc,CAAS,eAAe,CAAC,CAAC;AAE5D,QAAA,cAAc,GAAG,CAAC,OAAe,EAAiB,EAAE,CAAC,CAAC;IACjE,OAAO,EAAE,qBAAa;IACtB,QAAQ,EAAE,OAAO;CAClB,CAAC,CAAC","sourcesContent":["import { InjectionToken, Provider, ReflectiveInjector, ValueProvider } from 'injection-js';\nimport { buildNgPackage } from '../steps/build-ng-package';\n\nexport class NgPackagr {\n\n  constructor(\n    private providers: Provider[]\n  ) {}\n\n  public withProviders(providers: Provider[]): NgPackagr {\n    this.providers = [\n      ...this.providers,\n      ...providers\n    ];\n\n    return this;\n  }\n\n  public build(): Promise<void> {\n    const injector = ReflectiveInjector.resolveAndCreate(this.providers);\n    const project = injector.get(PROJECT_TOKEN);\n\n    return buildNgPackage({ project });\n  }\n\n}\n\nexport const ngPackagr = (): NgPackagr => new NgPackagr([\n  // TODO: default providers come here\n]);\n\nexport const PROJECT_TOKEN = new InjectionToken<string>('ng.v5.project');\n\nexport const provideProject = (project: string): ValueProvider => ({\n  provide: PROJECT_TOKEN,\n  useValue: project\n});\n"]}